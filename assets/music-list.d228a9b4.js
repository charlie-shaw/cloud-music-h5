import{Q as t,j as s,k as e,l as a,s as i,I as l,r as n,o,c as u,w as c,a as r,N as d,p as m,u as g,g as p,F as h,h as v,m as y,q as f,i as x,S as _}from"./index-93c86729.js";import{u as S,_ as k}from"./music-list-item.1c110b9b.js";import{_ as C,r as N}from"./home.3f015371.js";function j(s){return new Promise((e=>{const a=t();a.select(s).boundingClientRect(),a.exec((t=>{e(t)}))}))}const I=C({__name:"music-list",props:{playSongList:{type:Array,default:[]},height:{type:String,default:"auto"},isNavigate:{type:Boolean,default:!1}},emits:["itemClick"],setup(t,{emit:C}){const I=t,L=S(),{currentSong:D}=s(L);e().proxy;const b=a((()=>{let t="";return t="auto"!==I.height?I.height:B.value-44-w.value+"",t.includes("px")||(t+="px"),t})),q=i(0),w=i(0),$=a((()=>q.value*A.value-1)),A=i(0),B=a((()=>f().globalData.contentHeight)),F=()=>{L.playSongList=I.playSongList,C("itemClick")},H=t=>{A.value=t};return l((()=>{setTimeout((()=>{j(".music-list .item.listening").then((t=>{t[0]&&(q.value=t[0].height,A.value=t[0].dataset.cindex)})),j(".music-list .list-title").then((t=>{t[0]&&(w.value=t[0].height)}))}),10)})),(s,e)=>{const a=x,i=N(n("music-list-item"),k),l=_;return o(),u(a,{class:"music-list"},{default:c((()=>[r(a,{class:"list-title"},{default:c((()=>[d(s.$slots,"title",{},void 0,!0)])),_:3}),r(l,{"scroll-y":"",style:m(`height:${g(b)}`),"scroll-top":g($),class:"content"},{default:c((()=>[(o(!0),p(h,null,v(t.playSongList,((s,e)=>(o(),u(a,{key:s.id,class:y("item "+(g(D).id===s.id?"listening":"")),"data-cindex":g(D).id===s.id?e:""},{default:c((()=>[r(i,{index:e,itemData:s,isNavigate:t.isNavigate,onItemClick:F,onCurrentIndex:H},null,8,["index","itemData","isNavigate"])])),_:2},1032,["class","data-cindex"])))),128))])),_:1},8,["style","scroll-top"])])),_:3})}}},[["__scopeId","data-v-a13ed756"]]);export{I as _,j as q};
