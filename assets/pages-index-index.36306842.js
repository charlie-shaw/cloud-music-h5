import{r as e,o as a,c as t,w as s,a as l,b as i,t as n,d as r,i as o,e as c,u,n as d,f as m,g as p,F as f,h as g,S as _,j as y,k as h,l as k,m as v,p as w,q as x,s as D,v as b,x as L,y as C,z as j}from"./index-45478141.js";import{_ as S}from"./u-input.5062eae0.js";import{_ as I,r as M,f as R,a as $,b as F,o as W}from"./home.0b29f6a1.js";import{_ as z}from"./u-icon.b5f0b7ed.js";import{_ as A}from"./menu-item.63ee9059.js";import{_ as B}from"./music-list.5b0221eb.js";import{_ as U,a as H}from"./play_music.9b84a4a2.js";import"./index-default.45a26e56.js";import{u as O}from"./music-list-item.26939711.js";import{u as q}from"./home.d54181ec.js";import"./load-image.908fbf8d.js";const E=I({__name:"area-header",props:{title:{type:String,default:"标题"},hasMore:{type:Boolean,default:!0}},emits:["moreClick"],setup(u,{emit:d}){const m=()=>{d("moreClick")};return(d,p)=>{const f=o,g=c,_=M(e("u-icon"),z);return a(),t(f,{class:"header"},{default:s((()=>[l(f,{class:"title"},{default:s((()=>[i(n(u.title),1)])),_:1}),u.hasMore?(a(),t(f,{key:0,class:"more",onClick:m},{default:s((()=>[l(g,{class:"text"},{default:s((()=>[i("更多")])),_:1}),l(_,{name:"arrow-right"})])),_:1})):r("",!0)])),_:1})}}},[["__scopeId","data-v-ac069faa"]]),N=I({__name:"song-item-v1",props:{itemData:{type:Object,default:{}},index:{type:Number,default:0}},emits:["loadSongList"],setup(r,{emit:c}){const p=r,f=()=>{d({url:`/pages/music-player/music-player?id=${p.itemData.id}`}),c("loadSongList",p.index)};return(c,d)=>{const p=m,g=o,_=M(e("u-icon"),z);return a(),t(g,{class:"song-item",onClick:f},{default:s((()=>[l(p,{class:"cover",src:u(R)(r.itemData.al.picUrl,"70y70"),mode:"widthFix"},null,8,["src"]),l(g,{class:"info"},{default:s((()=>[l(g,{class:"name"},{default:s((()=>[i(n(r.itemData.name),1)])),_:1}),l(g,{class:"singer"},{default:s((()=>[i(n(r.itemData.ar[0].name)+" · "+n(r.itemData.al.name),1)])),_:1})])),_:1}),l(_,{class:"arrow",name:"arrow-right"})])),_:1})}}},[["__scopeId","data-v-fb97d104"]]),P=I({__name:"menu-area",props:{title:{type:String,default:"默认标题"},menuList:{type:Array,default:[]}},setup(i){const n=()=>{d({url:"/pages/detail-menu/detail-menu"})};return(r,c)=>{const u=M(e("area-header"),E),d=M(e("menu-item"),A),m=o,y=_;return a(),t(m,{class:"menu"},{default:s((()=>[l(u,{title:i.title,onMoreClick:n},null,8,["title"]),l(y,{class:"list","enable-flex":"","scroll-x":""},{default:s((()=>[(a(!0),p(f,null,g(i.menuList,(e=>(a(),t(m,{key:e.id,class:"item"},{default:s((()=>[l(d,{itemData:e},null,8,["itemData"])])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-768d2821"]]),G=I({__name:"ranking-item",props:{itemData:{type:Object,default:{}},keyword:{type:String}},setup(_){const y=_,h=()=>{d({url:`/pages/detail-song/detail-song?type=ranking&keyword=${y.keyword}`})};return(d,y)=>{const k=o,v=c,w=m,x=M(e("u-icon"),z);return _.itemData.id?(a(),t(k,{key:0,class:"ranking-item",onClick:h},{default:s((()=>[l(k,{class:"content"},{default:s((()=>[l(k,{class:"title"},{default:s((()=>[i(n(_.itemData.name),1)])),_:1}),(a(),p(f,null,g(3,((e,a)=>l(k,{key:e,class:"song-item"},{default:s((()=>[l(v,{class:"name"},{default:s((()=>[i(n(a+1)+". "+n(_.itemData.tracks[a].name),1)])),_:2},1024),l(v,{class:"singer"},{default:s((()=>[i("- "+n(_.itemData.tracks[a].ar[0].name),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),l(k,{class:"cover"},{default:s((()=>[l(w,{src:_.itemData.coverImgUrl,mode:"widthFix"},null,8,["src"]),l(k,{class:"play-count"},{default:s((()=>[l(x,{color:"white",size:"20rpx",name:"play-right-fill"}),i(" "+n(u($)(_.itemData.playCount)),1)])),_:1})])),_:1})])),_:1})):r("",!0)}}},[["__scopeId","data-v-5493d749"]]);const J=I({__name:"levitated-player",setup(g){const{clientWidth:_}=function(){let e=h().globalData.deviceWidth;return e=y(window.innerWidth),window.addEventListener("resize",(()=>{e.value=window.innerWidth})),{clientWidth:e}}(),C=O(),{currentSong:j,isPlaying:S,playSongList:I}=k(C),$=h(),W=v().proxy,z=$.globalData.audioContext,A=w((()=>h().globalData.contentHeight)),q=e=>{const{isbtn:a}=e.target.dataset;a||d({url:`/pages/music-player/music-player?id=${j.value.id}`})},E=()=>{z.paused?(z.play(),S.value=!0):(z.pause(),S.value=!1)},N=()=>{W.$refs.popup.open()},P=()=>{W.$refs.popup.close()},G=y(0);return x((()=>{D({success:e=>{G.value=e.windowBottom}})})),(d,g)=>{const y=m,h=o,k=c,v=M(e("music-list"),B),w=M(e("uni-popup"),U);return a(),p(f,null,[u(j).id?(a(),t(h,{key:0,class:"music-control",style:L(`width:${u(_)}px`),onClickCapture:q},{default:s((()=>[l(y,{class:b(`cover ${u(S)&&"animation-rotate"}`),src:u(R)(u(j).al.picUrl,"70y70"),mode:"widthFix"},null,8,["class","src"]),l(h,{class:"song-info"},{default:s((()=>[i(n(u(j).name)+" - "+n(u(F)(u(j).ar)),1)])),_:1}),l(h,{class:"control"},{default:s((()=>[l(y,{class:"play",src:`/static/images/player/play_${u(S)?"pause":"resume"}.png`,mode:"widthFix","data-isbtn":!0,onClick:E},null,8,["src"]),l(y,{class:"menu",src:H,mode:"widthFix","data-isbtn":!0,onClick:N})])),_:1})])),_:1},8,["style"])):r("",!0),l(w,{ref:"popup","data-isbtn":!0,"background-color":"white",type:"bottom"},{default:s((()=>[l(v,{style:L({paddingBottom:G.value+"px"}),playSongList:u(I),height:u(A)/2+"px",onItemClick:P},{title:s((()=>[i(" 当前播放列表 "),l(k,{class:"count"},{default:s((()=>[i("( "+n(u(I).length)+" )",1)])),_:1})])),_:1},8,["style","playSongList","height"])])),_:1},512)],64)}}},[["__scopeId","data-v-b1bf7259"]]);const K=I({__name:"index",setup(i){const n=y(!1),r=()=>{n.value=!1,d({url:"/pages/search/search"})},c=q(),_=O(),{bannerList:h,recommendList:v,hotMenus:x,chineseMenus:D}=k(c);W((()=>{c.fetchHomeBanner(),c.fetchRecommendList(),c.fetchSongMenuList(),c.fetchRankingDataAction()}));const b=w((()=>(v.value.tracks||[]).slice(0,6))),L=w((()=>({newRanking:c.newRanking,originRanking:c.originRanking,upRanking:c.upRanking}))),I=()=>{d({url:"/pages/detail-song/detail-song?type=recommend"})},R=e=>{!function(e){const a=O(),t=Array.isArray(e)?e:[];a.playSongList=t}(b.value||[]),_.currentIndex=e};return(i,c)=>{const d=M(e("up-input"),S),_=o,y=m,k=j,v=C,w=M(e("area-header"),E),$=M(e("song-item-v1"),N),F=M(e("menu-area"),P),W=M(e("ranking-item"),G),z=M(e("levitated-player"),J);return a(),p(f,null,[l(_,{class:"search"},{default:s((()=>[l(d,{placeholder:"搜索你喜欢的歌曲",prefixIcon:"search",prefixIconStyle:"font-size: 22px;color: #909399",onClick:r,focus:n.value,shape:"circle"},null,8,["focus"])])),_:1}),l(_,{class:"inner"},{default:s((()=>[l(v,{class:"banner","indicator-active-color":"#fff",circular:"","indicator-dots":"",autoplay:""},{default:s((()=>[(a(!0),p(f,null,g(u(h),(e=>(a(),t(k,{key:e.url,class:"item"},{default:s((()=>[l(y,{class:"image",src:e.imageUrl,mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1}),l(_,{class:"recommend"},{default:s((()=>[l(w,{title:"推荐歌曲",onMoreClick:I}),l(_,{class:"list inner"},{default:s((()=>[(a(!0),p(f,null,g(u(b),((e,s)=>(a(),t($,{key:e.id,class:"item",itemData:e,onLoadSongList:R,index:s},null,8,["itemData","index"])))),128))])),_:1})])),_:1}),l(F,{title:"热门歌单",menuList:u(x)},null,8,["menuList"]),l(F,{title:"华语歌单",menuList:u(D)},null,8,["menuList"]),l(_,{class:"ranking"},{default:s((()=>[l(w,{title:"巅峰榜",hasMore:!1}),l(_,{class:"ranking-list"},{default:s((()=>[(a(!0),p(f,null,g(u(L),((e,i)=>(a(),t(_,{key:e.id,class:"item"},{default:s((()=>[l(W,{keyword:i,itemData:e},null,8,["keyword","itemData"])])),_:2},1024)))),128))])),_:1})])),_:1}),l(z)],64)}}},[["__scopeId","data-v-2518c572"]]);export{K as default};
